!function(){"use strict";function e(e){return e.trim().split(/\s+/)}const t=new Set;const r=new Set;let n=0;const o=new Set;const s=[];function i(e,t){return`( ${e} + ${t} )`}function a(e,t,r){r.innerHTML+=`X${t}:<br>`;for(let[t,n]of e.entries())r.innerHTML+=`${t} => ${n}<br>`}const c=new Set,l=new Set;function f(e){return c.has(e)}function u(e){return l.has(e)}function d(e,t){let r=s[e],a=s[t],c=r.get(t);r.delete(t);for(let[e,t]of a.entries())r.has(e)?r.set(e,i(c+t,r.get(e))):r.set(e,c+t);o.has(e)?2===r.size&&r.has(e)&&(r.set(n,r.get(e)+"*"),r.delete(e)):1===r.size&&r.has(e)&&(r.set(n,r.get(e)+"*"),r.delete(e)),s[e]=r}function h(e,t,r){l.add(t);for(let n of Array.from(e.keys()))f(n)||u(n)||(h(s[n],n,r),d(t,n));return e.has(t)&&function(e,t){let r=s[e];if(!r.has(e)||""===r.get(e))return;let o=`(${r.get(e)})*`;if(r.delete(e),0===r.size)r.set(n,o);else for(let e of r.keys())r.set(e,o+r.get(e));s[e]=r,a(s[e],e,t)}(t,r),l.delete(t),e}function g(l,f){const u=l.split("\n").map((e=>e.trim()));let d=1;u.forEach((a=>{if(1===d)e(a).forEach((e=>t.add(e))),f.innerHTML+="Alfabeto: "+Array.from(t).join(" ")+"<br>";else if(2===d)!function(t){let o=e(t);o.forEach((e=>{try{let t=parseInt(e.slice(1));r.add(t)}catch(t){console.error(`Error al convertir ${e} a entero: ${t}`)}})),n=o.length}(a),f.innerHTML+="Estados: "+Array.from(r).join(" ")+"<br>";else if(3===d)!function(t){e(t).forEach((e=>{try{let t=parseInt(e.slice(1));o.add(t)}catch(t){console.error(`Error al convertir ${e} a entero: ${t}`)}}))}(a),f.innerHTML+="Estados válidos: "+Array.from(o).join(" ")+"<br>";else{let t=function(t){return e(t).slice(2).filter((e=>"+"!==e&&"/"!==e))}(a),r=function(e){let t=new Map;return e.forEach((e=>{try{let[r,n]=e.split("X");r="/"!==r?r:"λ",n=parseInt(n),t.has(n)?t.set(n,i(t.get(n),r)):t.set(n,r)}catch(t){console.error(`Error al procesar ${e}: ${t}`)}})),t}(t);o.has(d-4)&&r.set(n,"λ"),s.push(r),f.innerHTML+=`Ecuación para X${d-4}:<br>`,f.innerHTML+=Array.from(r.entries()).map((([e,t])=>e!==n?`${t}X${e}`:t)).join(" + ")+"<br><br>"}d++})),c.add(n),h(s[0],0,f),f.innerHTML+="Expresión Regular:<br>",a(s[0],0,f)}document.getElementById("fileInput").addEventListener("change",(e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result,r=document.getElementById("output");r.innerHTML="",g(t,r)},e.readAsText(t)}}))}();
